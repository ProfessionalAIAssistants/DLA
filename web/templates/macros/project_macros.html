{# Project Detail Page Macros #}

{# Project Header with title, status, and action buttons #}
{% macro project_header(project) %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">
        <i class="fas fa-project-diagram me-2"></i>{{ project.name }}
        <span class="badge bg-{{ 'success' if project.status == 'Completed' else 'primary' if project.status == 'In Progress' else 'warning' if project.status == 'On Hold' else 'secondary' }} ms-2">
            {{ project.status or 'Not Started' }}
        </span>
        {% if project.priority %}
        <span class="badge bg-{{ 'danger' if project.priority == 'High' else 'warning' if project.priority == 'Medium' else 'secondary' }} ms-1">
            {{ project.priority }} Priority
        </span>
        {% endif %}
    </h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-primary" onclick="editProject({{ project.id }})">
                <i class="fas fa-edit me-1"></i>
                Edit Project
            </button>
            <button type="button" class="btn btn-sm btn-outline-success" onclick="updateProgress({{ project.id }})">
                <i class="fas fa-tasks me-1"></i>
                Update Progress
            </button>
        </div>
        <a href="{{ url_for('projects') }}" class="btn btn-sm btn-outline-secondary">
            <i class="fas fa-arrow-left me-1"></i>
            Back to Projects
        </a>
    </div>
</div>
{% endmacro %}

{# Project Basic Information Card #}
{% macro basic_info(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-info-circle me-2"></i>Project Information
        </h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <table class="table table-borderless">
                    <tr>
                        <td><strong>Name:</strong></td>
                        <td>{{ project.name }}</td>
                    </tr>
                    <tr>
                        <td><strong>Status:</strong></td>
                        <td>
                            <span class="badge bg-{{ 'success' if project.status == 'Completed' else 'primary' if project.status == 'In Progress' else 'warning' if project.status == 'On Hold' else 'secondary' }}">
                                {{ project.status or 'Not Started' }}
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Priority:</strong></td>
                        <td>
                            {% if project.priority %}
                            <span class="badge bg-{{ 'danger' if project.priority == 'High' else 'warning' if project.priority == 'Medium' else 'secondary' }}">
                                {{ project.priority }}
                            </span>
                            {% else %}
                            N/A
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Progress:</strong></td>
                        <td>
                            <div class="progress" style="height: 20px;">
                                <div class="progress-bar" role="progressbar" style="width: {{ project.progress_percentage or 0 }}%">
                                    {{ project.progress_percentage or 0 }}%
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-md-6">
                <table class="table table-borderless">
                    <tr>
                        <td><strong>Start Date:</strong></td>
                        <td>{{ project.start_date or 'N/A' }}</td>
                    </tr>
                    <tr>
                        <td><strong>Due Date:</strong></td>
                        <td>
                            {% if project.due_date %}
                                <span class="{{ 'text-danger' if project.days_till_due and project.days_till_due < 0 else 'text-warning' if project.days_till_due and project.days_till_due <= 7 else '' }}">
                                    {{ project.due_date }}
                                    {% if project.days_till_due is not none %}
                                        ({{ project.days_till_due }} days)
                                    {% endif %}
                                </span>
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Project Manager:</strong></td>
                        <td>{{ project.project_manager or 'N/A' }}</td>
                    </tr>
                    <tr>
                        <td><strong>Budget:</strong></td>
                        <td>
                            {% if project.budget %}
                                ${{ "%.2f"|format(project.budget) }}
                                {% if project.actual_cost %}
                                    <small class="text-muted">(Spent: ${{ "%.2f"|format(project.actual_cost) }})</small>
                                {% endif %}
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        
        {% if project.description %}
        <hr>
        <div class="row">
            <div class="col-12">
                <h6><strong>Description:</strong></h6>
                <p>{{ project.description }}</p>
            </div>
        </div>
        {% endif %}
        
        {% if project.summary %}
        <hr>
        <div class="row">
            <div class="col-12">
                <h6><strong>Summary:</strong></h6>
                <p>{{ project.summary }}</p>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

{# Vendor Information Card #}
{% macro vendor_info(vendor) %}
{% if vendor %}
<div class="col-md-6">
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title mb-0">
                <i class="fas fa-building me-2"></i>Vendor
            </h5>
        </div>
        <div class="card-body">
            <h6>
                <a href="/account/{{ vendor.id }}" class="text-decoration-none">
                    {{ vendor.name }}
                </a>
            </h6>
            <p class="text-muted mb-0">{{ vendor.type or 'Vendor' }}</p>
            {% if vendor.email %}
            <small>
                <a href="mailto:{{ vendor.email }}" class="text-decoration-none">
                    <i class="fas fa-envelope me-1"></i>{{ vendor.email }}
                </a>
            </small>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}

{# Parent Project Information Card #}
{% macro parent_project_info(parent_project) %}
{% if parent_project %}
<div class="col-md-6">
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title mb-0">
                <i class="fas fa-sitemap me-2"></i>Parent Project
            </h5>
        </div>
        <div class="card-body">
            <h6>
                <a href="/project/{{ parent_project.id }}" class="text-decoration-none">
                    {{ parent_project.name }}
                </a>
            </h6>
            <p class="text-muted mb-0">{{ parent_project.status or 'Not Started' }}</p>
            {% if parent_project.due_date %}
            <small class="text-muted">Due: {{ parent_project.due_date }}</small>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}

{# Sub-projects Table #}
{% macro sub_projects_table(sub_projects) %}
{% if sub_projects %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-tasks me-2"></i>Sub-projects ({{ sub_projects|length }})
        </h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Progress</th>
                        <th>Due Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sub_project in sub_projects %}
                    <tr>
                        <td>
                            <a href="/project/{{ sub_project.id }}" class="text-decoration-none">
                                {{ sub_project.name }}
                            </a>
                        </td>
                        <td>
                            <span class="badge bg-{{ 'success' if sub_project.status == 'Completed' else 'primary' if sub_project.status == 'In Progress' else 'warning' if sub_project.status == 'On Hold' else 'secondary' }}">
                                {{ sub_project.status or 'Not Started' }}
                            </span>
                        </td>
                        <td>
                            <div class="progress" style="height: 15px; width: 100px;">
                                <div class="progress-bar" role="progressbar" style="width: {{ sub_project.progress_percentage or 0 }}%">
                                    <small>{{ sub_project.progress_percentage or 0 }}%</small>
                                </div>
                            </div>
                        </td>
                        <td>
                            {% if sub_project.due_date %}
                                <span class="{{ 'text-danger' if sub_project.days_till_due and sub_project.days_till_due < 0 else 'text-warning' if sub_project.days_till_due and sub_project.days_till_due <= 7 else '' }}">
                                    {{ sub_project.due_date }}
                                </span>
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                        <td>
                            <a href="/project/{{ sub_project.id }}" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-eye"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}

{# Related Tasks Table #}
{% macro related_tasks_table(related_tasks, project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-check-square me-2"></i>Related Tasks ({{ related_tasks|length if related_tasks else 0 }})
        </h5>
    </div>
    <div class="card-body">
        {% if related_tasks %}
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Status</th>
                        <th>Priority</th>
                        <th>Due Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for task in related_tasks %}
                    <tr>
                        <td>
                            <a href="/tasks/{{ task.id }}" class="text-decoration-none">
                                {{ task.subject }}
                            </a>
                        </td>
                        <td>
                            <span class="badge bg-{{ 'success' if task.status == 'Completed' else 'primary' if task.status == 'In Progress' else 'warning' if task.status == 'Waiting' else 'secondary' }}">
                                {{ task.status or 'Not Started' }}
                            </span>
                        </td>
                        <td>
                            {% if task.priority %}
                            <span class="badge bg-{{ 'danger' if task.priority == 'High' else 'warning' if task.priority == 'Normal' else 'secondary' }}">
                                {{ task.priority }}
                            </span>
                            {% else %}
                            N/A
                            {% endif %}
                        </td>
                        <td>
                            {% if task.due_date %}
                                <span class="{{ 'text-danger' if task.days_till_due and task.days_till_due < 0 else 'text-warning' if task.days_till_due and task.days_till_due <= 7 else '' }}">
                                    {{ task.due_date }}
                                </span>
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                        <td>
                            <a href="/tasks/{{ task.id }}" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-eye"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="text-center py-4">
            <i class="fas fa-tasks fa-3x text-muted mb-3"></i>
            <h6 class="text-muted">No Related Tasks</h6>
            <p class="text-muted small">No tasks have been linked to this project yet.</p>
            <button type="button" class="btn btn-outline-primary" onclick="addTask({{ project.id }})">
                <i class="fas fa-plus me-1"></i>Add First Task
            </button>
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

{# Related Opportunities Card #}
{% macro related_opportunities_card(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-handshake me-2"></i>Related Opportunities (0)
        </h5>
    </div>
    <div class="card-body">
        <div class="text-center py-4">
            <i class="fas fa-handshake fa-3x text-muted mb-3"></i>
            <h6 class="text-muted">No Related Opportunities</h6>
            <p class="text-muted small">No opportunities have been linked to this project yet.</p>
            <button type="button" class="btn btn-outline-primary" onclick="linkOpportunity({{ project.id }})">
                <i class="fas fa-plus me-1"></i>Link Opportunity
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Related Products Card #}
{% macro related_products_card(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-box me-2"></i>Related Products (0)
        </h5>
    </div>
    <div class="card-body">
        <div class="text-center py-4">
            <i class="fas fa-box fa-3x text-muted mb-3"></i>
            <h6 class="text-muted">No Related Products</h6>
            <p class="text-muted small">No products have been linked to this project yet.</p>
            <button type="button" class="btn btn-outline-primary" onclick="linkProduct({{ project.id }})">
                <i class="fas fa-plus me-1"></i>Link Product
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Project Notes Card #}
{% macro project_notes_card(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-sticky-note me-2"></i>Project Notes (0)
        </h5>
    </div>
    <div class="card-body">
        <div class="text-center py-4">
            <i class="fas fa-sticky-note fa-3x text-muted mb-3"></i>
            <h6 class="text-muted">No Notes</h6>
            <p class="text-muted small">No notes have been added to this project yet.</p>
            <button type="button" class="btn btn-outline-primary" onclick="addNote({{ project.id }})">
                <i class="fas fa-plus me-1"></i>Add Note
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Quick Actions Sidebar Card #}
{% macro quick_actions_card(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-bolt me-2"></i>Quick Actions
        </h5>
    </div>
    <div class="card-body">
        <div class="d-grid gap-2">
            <button type="button" class="btn btn-outline-success" onclick="startProject({{ project.id }})">
                <i class="fas fa-play me-2"></i>Start Project
            </button>
            <button type="button" class="btn btn-outline-info" onclick="updateProgress({{ project.id }})">
                <i class="fas fa-tasks me-2"></i>Update Progress
            </button>
            <button type="button" class="btn btn-outline-warning" onclick="completeProject({{ project.id }})">
                <i class="fas fa-check me-2"></i>Mark Complete
            </button>
            <button type="button" class="btn btn-outline-primary" onclick="addTask({{ project.id }})">
                <i class="fas fa-plus me-2"></i>Add Task
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Project Details Sidebar Card #}
{% macro project_details_sidebar(project) %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-chart-pie me-2"></i>Project Details
        </h5>
    </div>
    <div class="card-body">
        <div class="row text-center">
            <div class="col-6">
                <h4 class="text-primary">{{ project.progress_percentage or 0 }}%</h4>
                <small class="text-muted">Complete</small>
            </div>
            <div class="col-6">
                <h4 class="text-success">
                    {% if project.days_till_due is not none %}
                        {{ project.days_till_due }}
                    {% else %}
                        N/A
                    {% endif %}
                </h4>
                <small class="text-muted">Days Left</small>
            </div>
        </div>
        <hr>
        <div class="row text-center">
            <div class="col-6">
                <h6 class="text-muted">Team Members</h6>
                <p>{{ project.team_members or 'Not assigned' }}</p>
            </div>
            <div class="col-6">
                <h6 class="text-muted">Created</h6>
                <p>{{ project.created_date or 'N/A' }}</p>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{# Notes Sidebar Card #}
{% macro notes_sidebar(project) %}
{% if project.notes %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-sticky-note me-2"></i>Notes
        </h5>
    </div>
    <div class="card-body">
        <p>{{ project.notes }}</p>
    </div>
</div>
{% endif %}
{% endmacro %}

{# ========== PROJECTS LIST PAGE MACROS (consolidated from projects_macros.html) ========== #}

{# Projects Page Header #}
{% macro projects_page_header() %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1>Projects</h1>
        <p class="text-muted mb-0">Manage and track project progress across the organization</p>
    </div>
    <div>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProjectModal">
            <i class="fas fa-plus me-2"></i>
            Add Project
        </button>
    </div>
</div>
{% endmacro %}

{# Project Statistics Cards #}
{% macro project_stats_cards(stats) %}
<div class="row mb-4">
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">Total Projects</h6>
                        <h3 class="mb-0">{{ stats.total if stats else 0 }}</h3>
                    </div>
                    <div class="text-primary">
                        <i class="fas fa-project-diagram fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">In Progress</h6>
                        <h3 class="mb-0 text-info">{{ stats.in_progress if stats else 0 }}</h3>
                    </div>
                    <div class="text-info">
                        <i class="fas fa-play fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">Completed</h6>
                        <h3 class="mb-0 text-success">{{ stats.completed if stats else 0 }}</h3>
                    </div>
                    <div class="text-success">
                        <i class="fas fa-check fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">Overdue</h6>
                        <h3 class="mb-0 text-danger">{{ stats.overdue if stats else 0 }}</h3>
                    </div>
                    <div class="text-danger">
                        <i class="fas fa-exclamation-triangle fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">High Priority</h6>
                        <h3 class="mb-0 text-warning">{{ stats.high_priority if stats else 0 }}</h3>
                    </div>
                    <div class="text-warning">
                        <i class="fas fa-flag fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted mb-1">Total Budget</h6>
                        <h3 class="mb-0 text-primary">${{ "{:,.0f}".format(stats.total_budget) if stats and stats.total_budget else "0" }}</h3>
                    </div>
                    <div class="text-primary">
                        <i class="fas fa-dollar-sign fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{# Projects Search and Filter #}
{% macro projects_search_filter() %}
<div class="card mb-4">
    <div class="card-body">
        <form method="GET" class="row g-3">
            <div class="col-md-4">
                <label for="search" class="form-label">Search Projects</label>
                <input type="text" class="form-control" id="search" name="search" 
                       value="{{ request.args.get('search', '') }}" 
                       placeholder="Search by name, description...">
            </div>
            <div class="col-md-3">
                <label for="status" class="form-label">Status</label>
                <select class="form-control" id="status" name="status">
                    <option value="">All Statuses</option>
                    <option value="Not Started" {{ 'selected' if request.args.get('status') == 'Not Started' }}>Not Started</option>
                    <option value="In Progress" {{ 'selected' if request.args.get('status') == 'In Progress' }}>In Progress</option>
                    <option value="Completed" {{ 'selected' if request.args.get('status') == 'Completed' }}>Completed</option>
                    <option value="On Hold" {{ 'selected' if request.args.get('status') == 'On Hold' }}>On Hold</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="priority" class="form-label">Priority</label>
                <select class="form-control" id="priority" name="priority">
                    <option value="">All Priorities</option>
                    <option value="High" {{ 'selected' if request.args.get('priority') == 'High' }}>High</option>
                    <option value="Medium" {{ 'selected' if request.args.get('priority') == 'Medium' }}>Medium</option>
                    <option value="Low" {{ 'selected' if request.args.get('priority') == 'Low' }}>Low</option>
                </select>
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-primary me-2">
                    <i class="fas fa-search me-1"></i>Filter
                </button>
                <a href="{{ url_for('projects') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-times me-1"></i>Clear
                </a>
            </div>
        </form>
    </div>
</div>
{% endmacro %}

{# Projects Table #}
{% macro projects_table(projects) %}
<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover" id="projectsTable">
                <thead>
                    <tr>
                        <th>Project Name</th>
                        <th>Status</th>
                        <th>Priority</th>
                        <th>Progress</th>
                        <th>Due Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for project in projects %}
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                        <i class="fas fa-project-diagram text-white"></i>
                                    </div>
                                </div>
                                <div>
                                    <h6 class="mb-0">
                                        <a href="/project/{{ project.id }}" class="text-decoration-none">
                                            {{ project.name }}
                                        </a>
                                    </h6>
                                    {% if project.description %}
                                    <small class="text-muted">{{ project.description[:60] }}{{ '...' if project.description|length > 60 else '' }}</small>
                                    {% endif %}
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="badge bg-{{ 'success' if project.status == 'Completed' else 'primary' if project.status == 'In Progress' else 'warning' if project.status == 'On Hold' else 'secondary' }}">
                                {{ project.status or 'Not Started' }}
                            </span>
                        </td>
                        <td>
                            {% if project.priority %}
                            <span class="badge bg-{{ 'danger' if project.priority == 'High' else 'warning' if project.priority == 'Medium' else 'info' }}">
                                {{ project.priority }}
                            </span>
                            {% else %}
                            <span class="text-muted">-</span>
                            {% endif %}
                        </td>
                        <td>
                            {% set progress = project.progress or 0 %}
                            <div class="d-flex align-items-center">
                                <div class="progress me-2" style="width: 60px; height: 6px;">
                                    <div class="progress-bar bg-{{ 'success' if progress >= 75 else 'info' if progress >= 50 else 'warning' if progress >= 25 else 'danger' }}" 
                                         role="progressbar" style="width: {{ progress }}%"></div>
                                </div>
                                <small class="text-muted">{{ progress }}%</small>
                            </div>
                        </td>
                        <td>
                            {% if project.due_date %}
                                {% set days_left = (project.due_date - moment().date())|days %}
                                <div class="d-flex align-items-center">
                                    <small class="text-{{ 'danger' if days_left < 0 else 'warning' if days_left <= 3 else 'muted' }}">
                                        {{ project.due_date.strftime('%m/%d/%Y') }}
                                    </small>
                                    {% if days_left < 0 %}
                                    <span class="badge bg-danger ms-2">Overdue</span>
                                    {% elif days_left <= 3 %}
                                    <span class="badge bg-warning ms-2">Due Soon</span>
                                    {% endif %}
                                </div>
                            {% else %}
                                <span class="text-muted">No due date</span>
                            {% endif %}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="/project/{{ project.id }}" class="btn btn-outline-primary" title="View Project">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <button class="btn btn-outline-secondary" onclick="editProject({{ project.id }})" title="Edit Project">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-outline-danger" onclick="deleteProject({{ project.id }}, '{{ project.name }}')" title="Delete Project">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endmacro %}

{# Projects Empty State #}
{% macro projects_empty_state() %}
{% from 'macros/common_macros.html' import empty_state_card %}
{{ empty_state_card('project-diagram', 'No Projects Found', 'No projects match your search criteria. Try adjusting your filters or create a new project.') }}
{% endmacro %}

{# Add Project Modal #}
{% macro add_project_modal() %}
<div class="modal fade" id="addProjectModal" tabindex="-1" aria-labelledby="addProjectModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addProjectModalLabel">Add New Project</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="addProjectForm">
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-12">
                            <label for="name" class="form-label">Project Name *</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-12">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-control" id="status" name="status">
                                <option value="Not Started">Not Started</option>
                                <option value="In Progress">In Progress</option>
                                <option value="On Hold">On Hold</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="priority" class="form-label">Priority</label>
                            <select class="form-control" id="priority" name="priority">
                                <option value="">Select Priority</option>
                                <option value="Low">Low</option>
                                <option value="Medium">Medium</option>
                                <option value="High">High</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="start_date" class="form-label">Start Date</label>
                            <input type="date" class="form-control" id="start_date" name="start_date">
                        </div>
                        <div class="col-md-6">
                            <label for="due_date" class="form-label">Due Date</label>
                            <input type="date" class="form-control" id="due_date" name="due_date">
                        </div>
                        <div class="col-md-6">
                            <label for="budget" class="form-label">Budget</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input type="number" class="form-control" id="budget" name="budget" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="progress" class="form-label">Progress (%)</label>
                            <input type="number" class="form-control" id="progress" name="progress" min="0" max="100" value="0">
                        </div>
                        <div class="col-12">
                            <label for="team_members" class="form-label">Team Members</label>
                            <input type="text" class="form-control" id="team_members" name="team_members" placeholder="Enter team member names">
                        </div>
                        <div class="col-12">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" name="notes" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Project</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endmacro %}