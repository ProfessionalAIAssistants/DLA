{# Common Reusable Macros #}

{# Generic Empty State Macro #}
{% macro empty_state(icon, title, description, additional_classes='') %}
<div class="text-center py-5 {{ additional_classes }}">
    <i class="fas fa-{{ icon }} fa-3x text-muted mb-3"></i>
    <h5 class="text-muted">{{ title }}</h5>
    <p class="text-muted">{{ description }}</p>
</div>
{% endmacro %}

{# Generic Empty State Card #}
{% macro empty_state_card(icon, title, description, additional_classes='') %}
<div class="card {{ additional_classes }}">
    <div class="card-body">
        {{ empty_state(icon, title, description) }}
    </div>
</div>
{% endmacro %}

{# Generic Page Header Macro #}
{% macro page_header(title, icon='', buttons=[]) %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">
        {% if icon %}
            <i class="fas fa-{{ icon }} me-2"></i>
        {% endif %}
        {{ title }}
    </h1>
    {% if buttons %}
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            {% for button in buttons %}
            <button type="button" class="btn btn-sm {{ button.class or 'btn-primary' }}" 
                {% if button.modal %}data-bs-toggle="modal" data-bs-target="#{{ button.modal }}"{% endif %}
                {% if button.onclick %}onclick="{{ button.onclick }}"{% endif %}
                {% if button.href %}onclick="window.location.href='{{ button.href }}'"{% endif %}>
                {% if button.icon %}
                    <i class="fas fa-{{ button.icon }} me-1"></i>
                {% endif %}
                {{ button.text }}
            </button>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endmacro %}

{# Generic Search Form Wrapper #}
{% macro search_form_wrapper(form_content, form_method='GET', additional_classes='mb-4') %}
<div class="card {{ additional_classes }}">
    <div class="card-body">
        <form method="{{ form_method }}" class="row g-3">
            {{ form_content }}
        </form>
    </div>
</div>
{% endmacro %}

{# Generic Status Badge #}
{% macro status_badge(status, status_map=None, default_class='secondary') %}
{% if not status_map %}
    {% set status_map = {
        'Active': 'success',
        'Inactive': 'danger',
        'Pending': 'warning',
        'Completed': 'success',
        'In Progress': 'primary',
        'On Hold': 'warning',
        'Not Started': 'secondary',
        'High': 'danger',
        'Medium': 'warning',
        'Low': 'secondary'
    } %}
{% endif %}
{% set badge_class = status_map.get(status, default_class) %}
<span class="badge bg-{{ badge_class }}">
    {{ status or 'N/A' }}
</span>
{% endmacro %}

{# Generic Table Wrapper #}
{% macro table_wrapper(table_content, table_classes='table table-hover', container_classes='card') %}
<div class="{{ container_classes }}">
    <div class="table-responsive">
        <table class="{{ table_classes }}">
            {{ table_content }}
        </table>
    </div>
</div>
{% endmacro %}

{# Generic Modal Wrapper #}
{% macro modal_wrapper(modal_id, title, body_content, footer_content='', size='', scrollable=false, title_icon='') %}
<div class="modal fade" id="{{ modal_id }}" tabindex="-1" aria-labelledby="{{ modal_id }}Label" aria-hidden="true">
    <div class="modal-dialog{% if size %} modal-{{ size }}{% endif %}{% if scrollable %} modal-dialog-scrollable{% endif %}">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="{{ modal_id }}Label">
                    {% if title_icon %}
                        <i class="fas fa-{{ title_icon }} me-2"></i>
                    {% endif %}
                    {{ title }}
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {{ body_content }}
            </div>
            {% if footer_content %}
            <div class="modal-footer">
                {{ footer_content }}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}

{# Generic Stats Card #}
{% macro stats_card(title, value, icon, color='primary', description='') %}
<div class="card border-0 shadow-sm">
    <div class="card-body text-center">
        <div class="bg-{{ color }} bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 55px; height: 55px;">
            <i class="fas fa-{{ icon }} text-{{ color }} fs-5"></i>
        </div>
        <h4 class="text-dark mb-1 fw-bold">{{ value }}</h4>
        <small class="text-muted fw-medium">{{ title }}</small>
        {% if description %}
        <p class="text-muted small mt-1">{{ description }}</p>
        {% endif %}
    </div>
</div>
{% endmacro %}